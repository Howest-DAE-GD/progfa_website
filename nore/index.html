<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <title>pygame window</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #ADD8E6;
            color: #333;
        }
        .demo {
            background-color: #FFF5CC;
            margin: 20px auto;
            max-width: 1250px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        .demo-header {
            background-color: #D97C6A;
            color: #fff;
            padding: 15px 20px;
            font-size: 20px;
        }
        .demo-content {
            padding: 20px;
            width: auto;
            height: 800px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 24px;
        }
		
		#loading, #canvas {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        #loading {
            flex: 0px;
            text-align: center;
            color: #D97C6A;
            z-index: 2
        }

        #canvas {
            display: block;
            z-index: 1;
        }

        #canvas-container {
            display: none;
        }
    </style>
    <script src="pyodide/pyodide.js"></script>
</head>
<body>

<div class="demo">
    <div class="demo-header">Barcode Blitz - Nore Pollentier</div>
    <div class="demo-content" style="display: block;">
        <div id="loading">Loading ...</div>
        <canvas id="canvas" width="1200" height="600" style="cursor: url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAaUlEQVQ4T6XTQQ7AIAgEQPn/oxWMNK0isJSLXpyo2aXG03mIR/bo0DosSKsgD7BuAiMfoIIcAIqYAIJcgSziAhkkBCLE/QMNlZcPKwfzXDZYRxI1mVlk5v/dhRKwFwhBzAb+BvRZskYNHYNxeBFO+/RCAAAAAElFTkSuQmCC&quot;), auto;"></canvas>
    </div>
</div>

<script type="text/javascript">
    const curloc = document.location.href;
    const curdir = curloc.substring(0, curloc.lastIndexOf('/'));

    async function main(){
      let pyodide = await loadPyodide();

      // Load micropip to be able to install packages and pygame community edition
      await pyodide.loadPackage(["micropip", "pygame-ce"], { checkIntegrity: false })

      // Load in all python files and files from the Resources directory
      let zipResponse = await fetch("game.zip");
      let zipBinary = await zipResponse.arrayBuffer();
      pyodide.unpackArchive(zipBinary, "zip");

      // Set canvas on which to draw the game
      canvas = document.getElementById("canvas");
      pyodide.canvas.setCanvas2D(canvas);

      // Run the main.py file
      pyodide.runPythonAsync(`
        from main import main
        await main()
      `);

      // Hide loading screen and show canvas
      document.getElementById('loading').style.display = 'none';
      document.getElementsByClassName('demo-content')[0].style.display = 'block';
    }

    main()
</script>


</body></html>